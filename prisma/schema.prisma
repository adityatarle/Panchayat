// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Enums for better type safety
enum ApplicationStatus {
  SUBMITTED
  UNDER_REVIEW
  FIELD_VERIFICATION
  DOCUMENT_VERIFICATION
  APPROVED
  REJECTED
  COMPLETED
  CERTIFICATE_READY
}

enum PaymentStatus {
  PENDING
  PAID
  FAILED
}

enum VerificationStatus {
  PENDING
  COMPLETED
  FAILED
}

enum CommunicationType {
  SMS
  EMAIL
  CALL
  LETTER
  VISIT
}

enum CommunicationStatus {
  SENT
  DELIVERED
  FAILED
}

enum Priority {
  NORMAL
  URGENT
  VERY_URGENT
}

enum Gender {
  MALE
  FEMALE
  TRANSGENDER
}

enum Caste {
  GENERAL
  OBC
  SC
  ST
  NT
}

enum MaritalStatus {
  SINGLE
  MARRIED
  DIVORCED
  WIDOWED
}

enum PropertyType {
  RESIDENTIAL
  COMMERCIAL
  AGRICULTURAL
  INDUSTRIAL
  PLOT
}

enum PropertyUsage {
  SELF_OCCUPIED
  RENTED
  VACANT
  UNDER_CONSTRUCTION
}

enum TransferReason {
  SALE
  GIFT
  INHERITANCE
  WILL
  COURT_ORDER
  FAMILY_SETTLEMENT
  OTHER
}

enum Relation {
  SON
  DAUGHTER
  WIFE
  HUSBAND
  BROTHER
  SISTER
  FATHER
  MOTHER
  BUYER
  OTHER
}

enum ServiceType {
  PROPERTY_INFORMATION
  NEW_NAME_REGISTRATION
  PROPERTY_TRANSFER
  PROPERTY_NUMBER_CHANGE
  REVENUE_RECORD_VERIFICATION
  DEFICIT_SURPLUS_STATEMENT
  GP_PROPERTY_REGISTRATION
  GP_PROPERTY_CORRECTION
  GP_PROPERTY_DIVISION
  ROAD_REGISTRATION
  ROAD_CORRECTION
  LAND_REGISTRATION
  LAND_DISPOSAL
  DISABILITY_RECORD
  PROPERTY_VERIFICATION
  ORGAN_DONATION
  MILITARY_RECORDS
}

enum Purpose {
  BANK_LOAN
  LEGAL_MATTERS
  SALE_PURCHASE
  TAX_ASSESSMENT
  PROPERTY_VERIFICATION
  REGISTRATION
  EDUCATION
  EMPLOYMENT
  PASSPORT
  OTHER
}

// Birth Certificate Model
model BirthCertificate {
  id                String            @id @default(cuid())
  applicationId     String            @unique
  
  // Child Information
  childName         String
  childNameMarathi  String?
  dateOfBirth       DateTime
  placeOfBirth      String
  gender            Gender
  weight            Float?
  
  // Parent Information
  fatherName        String
  fatherNameMarathi String?
  fatherOccupation  String?
  motherName        String
  motherNameMarathi String?
  motherOccupation  String?
  
  // Address Information
  address           String
  city              String?
  district          String            @default("Maharashtra")
  state             String            @default("Maharashtra")
  pincode           String?
  
  // Contact Information
  mobileNumber      String
  email             String?
  
  // Hospital/Institution Details
  hospitalName      String?
  doctorName        String?
  registrationNumber String?
  
  // Application Status
  status            ApplicationStatus @default(SUBMITTED)
  submissionDate    DateTime          @default(now())
  processingDate    DateTime?
  approvalDate      DateTime?
  rejectionReason   String?
  reviewedBy        String?
  
  // Certificate Details
  certificateNumber String?
  certificateIssueDate DateTime?
  
  // Payment
  paymentStatus     PaymentStatus     @default(PENDING)
  paymentAmount     Float             @default(25.0)
  paymentId         String?
  paymentDate       DateTime?
  
  // Documents (JSON field for file paths)
  documents         Json?
  
  // Verification
  fieldVerification Json?
  
  // Remarks
  remarks           String?
  internalNotes     String?
  
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  
  @@map("birth_certificates")
}

// Residence Certificate Model
model ResidenceCertificate {
  id                 String            @id @default(cuid())
  applicationId      String            @unique
  
  // Applicant Information
  applicantName      String
  applicantNameMarathi String?
  fatherName         String
  motherName         String?
  dateOfBirth        DateTime
  age                Int?
  gender             Gender
  
  // Address Information
  currentAddress     String
  permanentAddress   String?
  pincode            String
  taluka             String?
  district           String            @default("Maharashtra")
  state              String            @default("Maharashtra")
  
  // Residence Details
  residenceSince     DateTime
  residenceYears     Int?
  residenceType      String?
  
  // Personal Information
  caste              Caste
  religion           String?
  occupation         String?
  income             Float?
  maritalStatus      MaritalStatus?
  
  // Contact Information
  mobileNumber       String
  email              String?
  aadharNumber       String?
  
  // Purpose
  purpose            Purpose
  purposeDescription String?
  
  // Application Status
  status             ApplicationStatus @default(SUBMITTED)
  submissionDate     DateTime          @default(now())
  processingDate     DateTime?
  approvalDate       DateTime?
  rejectionReason    String?
  reviewedBy         String?
  
  // Certificate Details
  certificateNumber  String?
  
  // Payment
  paymentStatus      PaymentStatus     @default(PENDING)
  paymentAmount      Float             @default(30.0)
  paymentId          String?
  
  // Documents (JSON field for file paths)
  documents          Json?
  
  // Field Verification
  fieldVerification  Json?
  
  // Remarks
  remarks            String?
  internalNotes      String?
  
  createdAt          DateTime          @default(now())
  updatedAt          DateTime          @updatedAt
  
  @@map("residence_certificates")
}

// Water Tax Model
model WaterTax {
  id                String            @id @default(cuid())
  applicationId     String            @unique
  
  // Consumer Information
  consumerName      String
  consumerNumber    String?
  fatherName        String
  address           String
  
  // Contact Information
  mobileNumber      String
  email             String?
  aadharNumber      String?
  
  // Connection Details
  connectionType    String
  meterNumber       String?
  pipeSize          String?
  
  // Billing Information
  currentReading    Float?
  previousReading   Float?
  consumption       Float?
  tariffRate        Float?
  
  // Payment Information
  billAmount        Float?
  dueDate           DateTime?
  penaltyAmount     Float?
  totalAmount       Float?
  
  // Application Status
  status            ApplicationStatus @default(SUBMITTED)
  submissionDate    DateTime          @default(now())
  processingDate    DateTime?
  approvalDate      DateTime?
  
  // Payment
  paymentStatus     PaymentStatus     @default(PENDING)
  paymentAmount     Float?
  paymentId         String?
  
  // Documents
  documents         Json?
  
  // Remarks
  remarks           String?
  
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  
  @@map("water_tax")
}

// House Tax Model
model HouseTax {
  id                String            @id @default(cuid())
  applicationId     String            @unique
  
  // Property Owner Information
  ownerName         String
  ownerNameMarathi  String?
  fatherName        String
  address           String
  
  // Contact Information
  mobileNumber      String
  email             String?
  aadharNumber      String?
  
  // Property Details
  propertyNumber    String?
  surveyNumber      String?
  propertyType      PropertyType?
  totalArea         Float?
  builtUpArea       Float?
  yearOfConstruction Int?
  
  // Tax Information
  annualRentalValue Float?
  taxRate           Float?
  taxAmount         Float?
  
  // Assessment Details
  assessmentYear    String?
  assessmentDate    DateTime?
  
  // Application Status
  status            ApplicationStatus @default(SUBMITTED)
  submissionDate    DateTime          @default(now())
  processingDate    DateTime?
  approvalDate      DateTime?
  
  // Payment
  paymentStatus     PaymentStatus     @default(PENDING)
  paymentAmount     Float?
  paymentId         String?
  
  // Documents
  documents         Json?
  
  // Remarks
  remarks           String?
  
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  
  @@map("house_tax")
}

// Malmatta Mahiti (Property Information) Model
model MalmattaMahiti {
  id                String            @id @default(cuid())
  applicationId     String            @unique
  
  // Service Type
  serviceType       ServiceType
  
  // मालमत्ता धारकाची माहिती (Property Holder Information)
  serialNo          String?           // अ.क्र.
  period            String?           // कालावधी
  villageName       String?           // गावाचे नाव
  propertyGroupEconomicCategory String? // मालमत्ता गट आर्थिक वर्ग
  propertyNumber    String?           // मालमत्ता क्रमांक
  wardNo            String?           // वार्ड नं.
  groupNo           String?           // गट नं.
  propertyActivityNo String?          // मालमत्ता उपक्रम क्र.
  streetName        String?           // रस्त्याचे नाव
  laneNo            String?           // गल्ली क्र.
  address           String?           // पत्‍ता
  propertyHolderName String?          // मालमत्ता धारकाचे नाव
  propertyHolderNameEnglish String?   // मालमत्ता धारकाचे नाव (ENGLISH)
  aadharNumber      String?           // आधार क्रमांक
  mobileNumber      String?           // मोबाइल क्रमांक
  waterSupply       String?           // पाणीपुरवठा
  permanentAccountNumber String?      // स्थायी खाते क्रमांक
  tapNumber         String?           // नळ क्रमांक
  residentNumber    String?           // रहिवासी क्र.
  toilet            String?           // शौचालय
  
  // Checkboxes (Right side options)
  planTax           Boolean           @default(false) // आराखडा कर
  diwaliTax         Boolean           @default(false) // दिवाळी कर
  diwanAgam         Boolean           @default(false) // दिवाण/अगम
  defenseArea       Boolean           @default(false) // संरक्षण क्षेत्रात काम करत असल्याचे
  midc              Boolean           @default(false) // महाराष्ट्र औद्योगिक विकास महामंडळ
  specialProperty   Boolean           @default(false) // विशेष प्रकारची मालमत्ता असल्यास नोंदणी करावी
  
  // मालमत्तेचे वर्णन (Property Description) - Multiple entries possible
  propertyDescriptions PropertyDescription[]
  
  // Legacy fields for compatibility
  surveyNumber      String?
  subdividedNumber  String?
  plotNumber        String?
  taluka            String?
  district          String            @default("Maharashtra")
  state             String            @default("Maharashtra")
  pincode           String?
  ownerName         String?
  ownerNameMarathi  String?
  fatherName        String?
  motherName        String?
  email             String?
  
  // New Owner Details (for name registration/transfer services)
  newOwnerName      String?
  newOwnerNameMarathi String?
  newOwnerFatherName String?
  newOwnerMotherName String?
  newOwnerDateOfBirth DateTime?
  newOwnerAadhar    String?
  newOwnerMobile    String?
  newOwnerEmail     String?
  newOwnerAddress   String?
  city              String?
  
  // Transfer Details
  transferReason    TransferReason?
  transferDate      DateTime?
  transferAmount    Float?
  stampDutyPaid     Float?
  registrationFee   Float?
  relationWithCurrentOwner Relation?
  
  // Property Information
  propertyType      PropertyType?
  propertyUsage     PropertyUsage?
  totalArea         Float?
  builtUpArea       Float?
  yearOfConstruction Int?
  
  // Revenue Details
  classOfLand       String?
  typeOfTenure      String?
  revenueRecordNumber String?
  
  // Personal Information
  maritalStatus     MaritalStatus?
  occupation        String?
  monthlyIncome     Float?
  
  // Purpose
  purpose           Purpose
  purposeDescription String?
  
  // Application Status
  status            ApplicationStatus @default(SUBMITTED)
  submissionDate    DateTime          @default(now())
  processingDate    DateTime?
  approvalDate      DateTime?
  completionDate    DateTime?
  rejectionReason   String?
  reviewedBy        String?
  
  // Fee and Payment
  paymentStatus     PaymentStatus     @default(PENDING)
  paymentAmount     Float?
  paymentId         String?
  paymentDate       DateTime?
  
  // Output Documents/Certificates
  certificateNumber String?
  certificateIssueDate DateTime?
  certificateValidTill DateTime?
  
  // Documents (JSON field for file paths)
  documents         Json?
  outputDocuments   Json?
  
  // Verification Details
  fieldVerification Json?
  documentVerification Json?
  
  // Administrative Details
  tahsildarOffice   String?
  assignedOfficer   String?
  officerContactNumber String?
  
  // Priority
  priority          Priority          @default(NORMAL)
  
  // Remarks and Notes
  remarks           String?
  internalNotes     String?
  citizenNotes      String?
  
  // Communication History
  communicationHistory CommunicationLog[]
  
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  
  @@map("malmatta_mahiti")
}

// Property Description Model for multiple property details
model PropertyDescription {
  id                String           @id @default(cuid())
  malmattaMahitiId  String
  malmattaMahiti    MalmattaMahiti   @relation(fields: [malmattaMahitiId], references: [id], onDelete: Cascade)
  
  // मालमत्तेचे वर्णन (Property Description)
  serialNo          Int              // मि.नं.
  propertyType      String?          // मि.प्रकार
  otherPropertyInfo String?          // मि. इतर माहिती
  floor             String?          // मजला
  areaForPerson     Float?           // इसमासाठी क्षेत्रफळ
  tank              String?          // टाकी
  length            Float?           // लांबी
  width             Float?           // रूंदी
  area              Float?           // क्षेत्रफळ
  usage             String?          // वापर
  propertyAssessmentCategory String? // मालमत्ता आकारणी प्रमाणे वर्ग
  assessmentYear    String?          // मालमत्ता आकारणी वर्ष
  landAssessmentRatePerSqm Float?    // जमिनीचा आकारणी दर प्रती चौ.मी.
  landRate          Float?           // जमिनीचा दर
  rateType          String?          // दरप्रकार कर दर प्रकार
  shopRatePerSqft   Float?           // गाळ्याचे दर प्रती चौ.फू.
  shopRatePerSqm    Float?           // गाळ्याचे दर प्रती चौ.मी
  taxAssessmentType String?          // टॅक्स आकारणी प्रकार
  subdivision       String?          // उपविभाग
  rebateExemption   String?          // सुटका
  
  createdAt         DateTime         @default(now())
  updatedAt         DateTime         @updatedAt
  
  @@map("property_descriptions")
}

// Communication Log Model
model CommunicationLog {
  id                String              @id @default(cuid())
  
  // Related Application
  malmattaMahitiId  String?
  malmattaMahiti    MalmattaMahiti?     @relation(fields: [malmattaMahitiId], references: [id])
  
  // Communication Details
  date              DateTime            @default(now())
  type              CommunicationType
  message           String
  sentBy            String?
  status            CommunicationStatus @default(SENT)
  
  // Additional fields for other certificate types
  birthCertificateId String?
  residenceCertificateId String?
  waterTaxId        String?
  houseTaxId        String?
  
  createdAt         DateTime            @default(now())
  updatedAt         DateTime            @updatedAt
  
  @@map("communication_logs")
}

// User/Admin Model (for authentication)
model User {
  id                String            @id @default(cuid())
  username          String            @unique
  email             String            @unique
  passwordHash      String
  firstName         String
  lastName          String
  role              String            @default("user") // user, admin, officer
  
  // Contact Information
  mobileNumber      String?
  address           String?
  
  // Administrative Details
  employeeId        String?
  department        String?
  designation       String?
  
  // Account Status
  isActive          Boolean           @default(true)
  lastLogin         DateTime?
  
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  
  @@map("users")
}

// Settings/Configuration Model
model SystemSettings {
  id                String            @id @default(cuid())
  key               String            @unique
  value             String
  description       String?
  category          String?
  
  createdAt         DateTime          @default(now())
  updatedAt         DateTime          @updatedAt
  
  @@map("system_settings")
}